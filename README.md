# MetaTube 离线版应用说明文档

## 项目概述

MetaTube 是一个为媒体服务器（如 Jellyfin/Emby/Plex/AMMDS）提供元数据插件的服务端应用。该项目是一个离线安装包，用于在支持的设备上部署 MetaTube 服务。

## 应用基本信息

- **应用名称**: MetaTube
- **版本**: 1.3.2
- **架构**: x86_64
- **维护者**: MetaTube
- **分发商**: 萌森工作室
- **最低系统版本要求**: 0.9.0
- **默认端口**: 9524

## 项目结构

```
MetaTube-Offline-FnNas/
├── app/                 # 应用相关文件
│   └── ui/              # 用户界面配置
├── cmd/                 # 命令脚本
├── config/              # 配置文件
├── wizard/              # 安装向导配置
├── manifest             # 应用清单文件
├── LICENSE              # 授权协议
└── ICON*.PNG            # 应用图标
```

## 核心组件

### 1. 应用清单 (manifest)
定义了应用的基本属性，包括名称、版本、描述、架构等信息，以及运行所需的权限和服务端口。

### 2. 主要执行脚本 (cmd/main)
这是应用的核心启动脚本，负责：
- 启动 MetaTube 服务
- 停止服务进程
- 检查服务状态
- 日志记录

主要参数：
- 数据库路径: `${TRIM_APPDEST_VOL}/@appshare/metatube/db/metatube.db`
- 端口: 从配置变量 `metatube_app_port` 获取
- 访问令牌: 从配置变量 `metatube_password` 获取
- 网络代理: 从配置变量 `metatube_proxy` 获取

### 3. 权限配置 (config/privilege)
定义了应用运行所需的安全权限：
- 默认以 root 权限运行
- 使用专用用户 `app-metatube` 和组 `app-metatube`

### 4. 资源配置 (config/resource)
定义了应用需要的数据共享资源：
- 创建 `metatube` 和 `metatube/db` 共享目录
- 授予 `app-metatube` 用户读写权限

## 安装配置向导

### 安装步骤

1. **配置访问密钥**
   - 设置访问密码（可选，最少8位）

2. **配置网络代理**
   - 可设置代理地址以解决部分网站在中国大陆无法访问的问题

3. **应用配置**
   - 设置应用端口（默认9524）
   - 需要同意服务条款

### 卸载步骤

1. **确认卸载**
   - 选择是否保留数据：
     - 保留数据（推荐）- 将来重新安装时可恢复
     - 删除所有数据 - 不可恢复操作

## 用户界面配置

UI 配置文件位于 `app/ui/config`，定义了应用在系统中的显示方式：
- 以 iframe 形式嵌入网页界面
- 使用 HTTP 协议，端口 9524
- 根路径访问 `/`

## 许可协议

本项目采用 Apache License 2.0 授权，并附加以下条款：
- 本插件仅供学习以及技术交流使用
- 请勿在公共社交平台上宣传此项目
- 使用本软件时请遵守当地法律法规
- 法律及使用后果由使用者自己承担
- 禁止将本软件用于任何的商业用途

## 使用注意事项

1. 应用需要特定端口（默认9524）进行通信，请确保端口未被占用
2. 部分功能可能需要网络代理才能正常使用
3. 应用数据存储在指定的共享目录中，卸载时可以选择是否保留
4. 应用以专用用户身份运行，确保安全性